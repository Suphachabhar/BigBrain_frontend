{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/suphachabharnigrodhananda/Desktop/6080/ass3/frontend/src/pages/register.jsx\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport propTypes from 'prop-types';\nimport Cookies from 'universal-cookie';\nimport { Redirect } from 'react-router-dom';\n\nfunction Register({\n  setAlert\n}) {\n  _s();\n\n  const cookies = new Cookies();\n  const [redirect, setRedirect] = React.useState('');\n  const [email, setEmail] = React.useState('');\n  const [pw, setPassword] = React.useState('');\n  const [name, setName] = React.useState('');\n  const closeBtn = /*#__PURE__*/React.createElement('button', {\n    className: 'btn-close',\n    onClick: () => {\n      setAlert(null);\n    }\n  }, 'Close');\n\n  const checkCredential = e => {\n    fetch('http://localhost:5005/admin/auth/register', {\n      method: 'POST',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        email: email,\n        password: pw,\n        name: name\n      })\n    }).then(data => {\n      if (data.status === 200) {\n        data.json().then(result => {\n          cookies.set('email', email);\n          cookies.set('token', result.token);\n          setAlert( /*#__PURE__*/React.createElement('div', {\n            className: 'alert alert-success alert-dismissible fade show',\n            role: 'alert'\n          }, 'You have registered.', closeBtn));\n          setRedirect('/dashboard');\n        });\n      } else {\n        data.json().then(result => {\n          setAlert( /*#__PURE__*/React.createElement('div', {\n            className: 'alert alert-danger alert-dismissible fade show',\n            role: 'alert'\n          }, result.error, closeBtn));\n        });\n      }\n    });\n  };\n\n  if (redirect === '') {\n    return /*#__PURE__*/_jsxDEV(\"body\", {\n      className: \"text-center\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-signin\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-floating\",\n          children: /*#__PURE__*/_jsxDEV(\"label\", {\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"email\",\n              className: \"form-control\",\n              onChange: e => {\n                setEmail(e.target.value);\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 63,\n              columnNumber: 15\n            }, this), \"Email\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-floating\",\n          children: /*#__PURE__*/_jsxDEV(\"label\", {\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"password\",\n              className: \"form-control\",\n              onChange: e => {\n                setPassword(e.target.value);\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 75,\n              columnNumber: 15\n            }, this), \"Password\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-floating\",\n          children: /*#__PURE__*/_jsxDEV(\"label\", {\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"name\",\n              className: \"form-control\",\n              onChange: e => {\n                setName(e.target.value);\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 15\n            }, this), \"Name\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-primary\",\n          onClick: checkCredential,\n          children: \"Register\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"/login\",\n          children: 'Already have an account? Login'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this);\n  } else {\n    return /*#__PURE__*/_jsxDEV(Redirect, {\n      push: true,\n      to: redirect\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }, this);\n  }\n}\n\n_s(Register, \"BUoQMWdZnDY4mzv2ttNtl5AWzBI=\");\n\n_c = Register;\nRegister.propTypes = {\n  setAlert: propTypes.func\n};\nexport default Register;\n\nvar _c;\n\n$RefreshReg$(_c, \"Register\");","map":{"version":3,"sources":["/Users/suphachabharnigrodhananda/Desktop/6080/ass3/frontend/src/pages/register.jsx"],"names":["React","propTypes","Cookies","Redirect","Register","setAlert","cookies","redirect","setRedirect","useState","email","setEmail","pw","setPassword","name","setName","closeBtn","createElement","className","onClick","checkCredential","e","fetch","method","headers","Accept","body","JSON","stringify","password","then","data","status","json","result","set","token","role","error","target","value","func"],"mappings":"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","sourcesContent":["import React from 'react';\nimport propTypes from 'prop-types';\nimport Cookies from 'universal-cookie';\nimport {\n  Redirect\n} from 'react-router-dom';\n\nfunction Register ({ setAlert }) {\n  const cookies = new Cookies();\n  const [redirect, setRedirect] = React.useState('');\n  const [email, setEmail] = React.useState('');\n  const [pw, setPassword] = React.useState('');\n  const [name, setName] = React.useState('');\n  const closeBtn = React.createElement('button', {\n    className: 'btn-close',\n    onClick: () => { setAlert(null); }\n  }, 'Close');\n\n  const checkCredential = (e) => {\n    fetch('http://localhost:5005/admin/auth/register', {\n      method: 'POST',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        email: email,\n        password: pw,\n        name: name\n      })\n    }).then(data => {\n      if (data.status === 200) {\n        data.json().then((result) => {\n          cookies.set('email', email);\n          cookies.set('token', result.token);\n          setAlert(React.createElement('div', {\n            className: 'alert alert-success alert-dismissible fade show',\n            role: 'alert'\n          }, 'You have registered.', closeBtn));\n          setRedirect('/dashboard');\n        });\n      } else {\n        data.json().then((result) => {\n          setAlert(React.createElement('div', {\n            className: 'alert alert-danger alert-dismissible fade show',\n            role: 'alert'\n          }, result.error, closeBtn));\n        });\n      }\n    });\n  };\n\n  if (redirect === '') {\n    return (\n      <body className=\"text-center\">\n        <div\n          className='form-signin'\n        >\n          <div\n            className='form-floating'\n          >\n            <label>\n              <input\n                type='email'\n                className='form-control'\n                onChange={(e) => { setEmail(e.target.value); }}\n              ></input>\n              Email\n            </label>\n          </div>\n          <div\n            className='form-floating'\n          >\n            <label>\n              <input\n                type='password'\n                className='form-control'\n                onChange={(e) => { setPassword(e.target.value); }}\n              ></input>\n              Password\n            </label>\n          </div>\n          <div\n            className='form-floating'\n          >\n            <label>\n              <input\n                type='name'\n                className='form-control'\n                onChange={(e) => { setName(e.target.value); }}\n              ></input>\n              Name\n            </label>\n          </div>\n          <button\n            className='btn btn-primary'\n            onClick={checkCredential}\n          >\n            Register\n          </button>\n          <a href=\"/login\">\n            {'Already have an account? Login'}\n          </a>\n        </div>\n      </body>\n    );\n  } else {\n    return (\n      <Redirect push to={redirect} />\n    );\n  }\n}\n\nRegister.propTypes = {\n  setAlert: propTypes.func\n};\n\nexport default Register;\n"]},"metadata":{},"sourceType":"module"}