{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/suphachabharnigrodhananda/Desktop/6080/ass3/frontend/src/pages/dashboard.jsx\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport 'bootstrap/dist/js/bootstrap.min.js';\nimport Cookies from 'universal-cookie';\nimport { Redirect } from 'react-router-dom';\nexport default function Dashboard() {\n  _s();\n\n  const cookies = new Cookies();\n  const [redirect, setRedirect] = React.useState('');\n  const [alertArea, setAlert] = React.useState(null);\n  const [games, setGames] = React.useState([]);\n  const closeBtn = /*#__PURE__*/React.createElement('button', {\n    className: 'btn-close',\n    onClick: () => {\n      setAlert(null);\n    }\n  }, 'Close');\n  fetch('http://localhost:5005/admin/quiz', {\n    method: 'GET',\n    headers: {\n      Accept: 'application/json',\n      'Content-Type': 'application/json',\n      Authorization: 'Bearer ' + cookies.get('token')\n    }\n  }).then(data => {\n    if (data.status === 200) {\n      data.json().then(result => {\n        setGames(result.quizzes);\n      });\n    } else {\n      cookies.remove('token');\n      setAlert( /*#__PURE__*/React.createElement('div', {\n        className: 'alert alert-warning alert-dismissible fade show',\n        role: 'alert'\n      }, 'Your session has expired. Please log in again.', closeBtn));\n      setRedirect('/login');\n    }\n  });\n\n  if (redirect === '') {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: alertArea\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: games\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true);\n  } else {\n    return /*#__PURE__*/_jsxDEV(Redirect, {\n      push: true,\n      to: redirect\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this);\n  }\n}\n\n_s(Dashboard, \"//CRAvgeEvS9l20lNOmdqrFPkoI=\");\n\n_c = Dashboard;\n\nvar _c;\n\n$RefreshReg$(_c, \"Dashboard\");","map":{"version":3,"sources":["/Users/suphachabharnigrodhananda/Desktop/6080/ass3/frontend/src/pages/dashboard.jsx"],"names":["React","Cookies","Redirect","Dashboard","cookies","redirect","setRedirect","useState","alertArea","setAlert","games","setGames","closeBtn","createElement","className","onClick","fetch","method","headers","Accept","Authorization","get","then","data","status","json","result","quizzes","remove","role"],"mappings":";;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,sCAAP;AACA,OAAO,oCAAP;AACA,OAAOC,OAAP,MAAoB,kBAApB;AACA,SACEC,QADF,QAEO,kBAFP;AAIA,eAAe,SAASC,SAAT,GAAsB;AAAA;;AACnC,QAAMC,OAAO,GAAG,IAAIH,OAAJ,EAAhB;AACA,QAAM,CAACI,QAAD,EAAWC,WAAX,IAA0BN,KAAK,CAACO,QAAN,CAAe,EAAf,CAAhC;AACA,QAAM,CAACC,SAAD,EAAYC,QAAZ,IAAwBT,KAAK,CAACO,QAAN,CAAe,IAAf,CAA9B;AACA,QAAM,CAACG,KAAD,EAAQC,QAAR,IAAoBX,KAAK,CAACO,QAAN,CAAe,EAAf,CAA1B;AACA,QAAMK,QAAQ,gBAAGZ,KAAK,CAACa,aAAN,CAAoB,QAApB,EAA8B;AAC7CC,IAAAA,SAAS,EAAE,WADkC;AAE7CC,IAAAA,OAAO,EAAE,MAAM;AAAEN,MAAAA,QAAQ,CAAC,IAAD,CAAR;AAAiB;AAFW,GAA9B,EAGd,OAHc,CAAjB;AAKAO,EAAAA,KAAK,CAAC,kCAAD,EAAqC;AACxCC,IAAAA,MAAM,EAAE,KADgC;AAExCC,IAAAA,OAAO,EAAE;AACPC,MAAAA,MAAM,EAAE,kBADD;AAEP,sBAAgB,kBAFT;AAGPC,MAAAA,aAAa,EAAE,YAAYhB,OAAO,CAACiB,GAAR,CAAY,OAAZ;AAHpB;AAF+B,GAArC,CAAL,CAOGC,IAPH,CAOQC,IAAI,IAAI;AACd,QAAIA,IAAI,CAACC,MAAL,KAAgB,GAApB,EAAyB;AACvBD,MAAAA,IAAI,CAACE,IAAL,GAAYH,IAAZ,CAAkBI,MAAD,IAAY;AAC3Bf,QAAAA,QAAQ,CAACe,MAAM,CAACC,OAAR,CAAR;AACD,OAFD;AAGD,KAJD,MAIO;AACLvB,MAAAA,OAAO,CAACwB,MAAR,CAAe,OAAf;AACAnB,MAAAA,QAAQ,eAACT,KAAK,CAACa,aAAN,CAAoB,KAApB,EAA2B;AAClCC,QAAAA,SAAS,EAAE,iDADuB;AAElCe,QAAAA,IAAI,EAAE;AAF4B,OAA3B,EAGN,gDAHM,EAG4CjB,QAH5C,CAAD,CAAR;AAIAN,MAAAA,WAAW,CAAC,QAAD,CAAX;AACD;AACF,GApBD;;AAsBA,MAAID,QAAQ,KAAK,EAAjB,EAAqB;AACnB,wBACE;AAAA,8BACE;AAAA,kBACGG;AADH;AAAA;AAAA;AAAA;AAAA,cADF,eAIE;AAAA,kBACGE;AADH;AAAA;AAAA;AAAA;AAAA,cAJF;AAAA,oBADF;AAUD,GAXD,MAWO;AACL,wBACE,QAAC,QAAD;AAAU,MAAA,IAAI,MAAd;AAAe,MAAA,EAAE,EAAEL;AAAnB;AAAA;AAAA;AAAA;AAAA,YADF;AAGD;AACF;;GAhDuBF,S;;KAAAA,S","sourcesContent":["import React from 'react';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport 'bootstrap/dist/js/bootstrap.min.js';\nimport Cookies from 'universal-cookie';\nimport {\n  Redirect\n} from 'react-router-dom';\n\nexport default function Dashboard () {\n  const cookies = new Cookies();\n  const [redirect, setRedirect] = React.useState('');\n  const [alertArea, setAlert] = React.useState(null);\n  const [games, setGames] = React.useState([]);\n  const closeBtn = React.createElement('button', {\n    className: 'btn-close',\n    onClick: () => { setAlert(null); }\n  }, 'Close');\n\n  fetch('http://localhost:5005/admin/quiz', {\n    method: 'GET',\n    headers: {\n      Accept: 'application/json',\n      'Content-Type': 'application/json',\n      Authorization: 'Bearer ' + cookies.get('token')\n    }\n  }).then(data => {\n    if (data.status === 200) {\n      data.json().then((result) => {\n        setGames(result.quizzes);\n      });\n    } else {\n      cookies.remove('token');\n      setAlert(React.createElement('div', {\n        className: 'alert alert-warning alert-dismissible fade show',\n        role: 'alert'\n      }, 'Your session has expired. Please log in again.', closeBtn));\n      setRedirect('/login');\n    }\n  });\n\n  if (redirect === '') {\n    return (\n      <>\n        <div>\n          {alertArea}\n        </div>\n        <div>\n          {games}\n        </div>\n      </>\n    );\n  } else {\n    return (\n      <Redirect push to={redirect} />\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}