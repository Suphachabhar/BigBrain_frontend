{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/suphachabharnigrodhananda/Desktop/6080/ass3/frontend/src/pages/create.jsx\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport propTypes from 'prop-types';\nimport Cookies from 'universal-cookie';\nimport { Redirect } from 'react-router-dom';\n\nfunction Create({\n  setAlert\n}) {\n  _s();\n\n  const cookies = new Cookies();\n  const [redirect, setRedirect] = React.useState('');\n  const [name, setName] = React.useState([]);\n  const closeBtn = /*#__PURE__*/React.createElement('button', {\n    className: 'btn-close',\n    onClick: () => {\n      setAlert(null);\n    }\n  }, 'Close');\n\n  const createGame = () => {\n    fetch('http://localhost:5005/admin/quiz/new', {\n      method: 'POST',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json',\n        Authorization: 'Bearer ' + cookies.get('token')\n      },\n      body: JSON.stringify({\n        name: name\n      })\n    }).then(data => {\n      if (data.status === 200) {\n        setAlert( /*#__PURE__*/React.createElement('div', {\n          className: 'alert alert-success alert-dismissible fade show',\n          role: 'alert'\n        }, 'You have created \"' + name + '\"', closeBtn));\n        setRedirect('/dashboard');\n      } else if (data.status === 403) {\n        cookies.remove('email');\n        cookies.remove('token');\n        setAlert( /*#__PURE__*/React.createElement('div', {\n          className: 'alert alert-warning alert-dismissible fade show',\n          role: 'alert'\n        }, 'Your session has expired. Please log in again.', closeBtn));\n        setRedirect('/login');\n      } else {\n        data.json().then(result => {\n          setAlert( /*#__PURE__*/React.createElement('div', {\n            className: 'alert alert-danger alert-dismissible fade show',\n            role: 'alert'\n          }, result.error, closeBtn));\n        });\n      }\n    });\n  };\n\n  if (redirect === '') {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Create game\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Name: \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          onChange: e => {\n            setName(e.target.value);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-primary\",\n          onClick: createGame,\n          children: \"Create\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this)\n    }, void 0, false);\n  } else {\n    return /*#__PURE__*/_jsxDEV(Redirect, {\n      push: true,\n      to: redirect\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this);\n  }\n}\n\n_s(Create, \"1uwWCsHQELp9z1dAUXLAwB/kafE=\");\n\n_c = Create;\nCreate.propTypes = {\n  setAlert: propTypes.func\n};\nexport default Create;\n\nvar _c;\n\n$RefreshReg$(_c, \"Create\");","map":{"version":3,"sources":["/Users/suphachabharnigrodhananda/Desktop/6080/ass3/frontend/src/pages/create.jsx"],"names":["React","propTypes","Cookies","Redirect","Create","setAlert","cookies","redirect","setRedirect","useState","name","setName","closeBtn","createElement","className","onClick","createGame","fetch","method","headers","Accept","Authorization","get","body","JSON","stringify","then","data","status","role","remove","json","result","error","e","target","value","func"],"mappings":"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","sourcesContent":["import React from 'react';\nimport propTypes from 'prop-types';\nimport Cookies from 'universal-cookie';\nimport {\n  Redirect\n} from 'react-router-dom';\n\nfunction Create ({ setAlert }) {\n  const cookies = new Cookies();\n  const [redirect, setRedirect] = React.useState('');\n  const [name, setName] = React.useState([]);\n  const closeBtn = React.createElement('button', {\n    className: 'btn-close',\n    onClick: () => { setAlert(null); }\n  }, 'Close');\n\n  const createGame = () => {\n    fetch('http://localhost:5005/admin/quiz/new', {\n      method: 'POST',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json',\n        Authorization: 'Bearer ' + cookies.get('token')\n      },\n      body: JSON.stringify({\n        name: name\n      })\n    }).then(data => {\n      if (data.status === 200) {\n        setAlert(React.createElement('div', {\n          className: 'alert alert-success alert-dismissible fade show',\n          role: 'alert'\n        }, 'You have created \"' + name + '\"', closeBtn));\n        setRedirect('/dashboard');\n      } else if (data.status === 403) {\n        cookies.remove('email');\n        cookies.remove('token');\n        setAlert(React.createElement('div', {\n          className: 'alert alert-warning alert-dismissible fade show',\n          role: 'alert'\n        }, 'Your session has expired. Please log in again.', closeBtn));\n        setRedirect('/login');\n      } else {\n        data.json().then((result) => {\n          setAlert(React.createElement('div', {\n            className: 'alert alert-danger alert-dismissible fade show',\n            role: 'alert'\n          }, result.error, closeBtn));\n        });\n      }\n    });\n  };\n\n  if (redirect === '') {\n    return (\n      <>\n        <div>\n          <h1>Create game</h1>\n          <label>Name: </label>\n          <input\n            type='text'\n            onChange={(e) => { setName(e.target.value); }}\n          ></input>\n          <button\n            className='btn btn-primary'\n            onClick={createGame}\n          >\n            Create\n          </button>\n        </div>\n      </>\n    );\n  } else {\n    return (\n      <Redirect push to={redirect} />\n    );\n  }\n}\n\nCreate.propTypes = {\n  setAlert: propTypes.func\n};\n\nexport default Create;\n"]},"metadata":{},"sourceType":"module"}