{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/suphachabharnigrodhananda/Desktop/6080/ass3/frontend/src/elements/createQuestion.jsx\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { OptionStyle } from '../components/OptionStyle.styles';\nimport { useParams } from 'react-router';\nimport Cookies from 'universal-cookie';\nimport propTypes from 'prop-types';\nimport { Redirect } from 'react-router-dom';\n\nfunction CreateQuestion({\n  changeAlert,\n  forceLogout\n}) {\n  _s();\n\n  const cookies = new Cookies();\n  const {\n    id\n  } = useParams();\n  const [redirect, setRedirect] = React.useState('');\n  const [updateType, setUpdateType] = React.useState('multiple');\n  const [numAnswer, setNumAnswer] = React.useState('1');\n  const [question, setQuestion] = React.useState('');\n  const [time, setTime] = React.useState(0);\n  const [point, setPoint] = React.useState(0);\n  const [src, setSrc] = React.useState('');\n  const answers = [];\n  const setAnswers = [];\n\n  for (let i = 0; i < 6; i++) {\n    const [answer, setAnswer] = React.useState('');\n    answers.push(answer);\n    setAnswers.push(setAnswer);\n  }\n\n  const correct = [];\n  const setCorrect = [];\n\n  for (let i = 0; i < 6; i++) {\n    const [isCorrect, setIsCorrect] = React.useState(false);\n    correct.push(isCorrect);\n    setCorrect.push(setIsCorrect);\n  }\n\n  React.useEffect(() => {\n    if (updateType === 'single') {\n      setNumAnswer('0');\n    } else {\n      setNumAnswer('1');\n    }\n  }, [updateType]);\n\n  const updateValue = e => {\n    setUpdateType(e.target.value);\n  };\n\n  const createQ = () => {\n    let valid = true;\n    const choicesJSON = [];\n    const answersJSON = [];\n\n    if (question === '') {\n      valid = false;\n      changeAlert('danger', 'You must add a description for the question');\n    } else if (time <= 0 || point <= 0) {\n      valid = false;\n      changeAlert('danger', 'You must add a valid value for time and point (>0)');\n    } else {\n      let id = 1;\n\n      for (let i = 0; i < 6; i++) {\n        if (answers[i] !== '') {\n          choicesJSON.push({\n            id: id,\n            choice: answers[i]\n          });\n\n          if (correct[i]) {\n            answersJSON.push(id);\n          }\n\n          id++;\n        }\n      }\n\n      if (choicesJSON.length < 2) {\n        valid = false;\n        changeAlert('danger', 'The question must have 2-6 choices');\n      } else if (answersJSON.length < 1) {\n        valid = false;\n        changeAlert('danger', 'The question must have correct answer');\n      } else if (numAnswer === '0' && answersJSON.length > 1) {\n        valid = false;\n        changeAlert('danger', 'The single-choice question can only have 1 correct answer');\n      }\n    }\n\n    if (valid) {\n      fetch('http://localhost:5005/admin/quiz/' + id, {\n        method: 'GET',\n        headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/json',\n          Authorization: 'Bearer ' + cookies.get('token')\n        }\n      }).then(data => {\n        if (data.status === 200) {\n          data.json().then(result => {\n            result.questions.push({\n              description: question,\n              time: time,\n              point: point,\n              src: src === '' ? null : 'http://www.youtube.com/embed/' + src,\n              choices: choicesJSON,\n              answers: answersJSON\n            });\n            fetch('http://localhost:5005/admin/quiz/' + id, {\n              method: 'PUT',\n              headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json',\n                Authorization: 'Bearer ' + cookies.get('token')\n              },\n              body: JSON.stringify(result)\n            }).then(data => {\n              if (data.status === 200) {\n                changeAlert('success', 'You have add \"' + question + '\" to \"' + result.name + '\"');\n                setRedirect('/edit/' + id);\n              } else if (data.status === 403) {\n                forceLogout();\n                setRedirect('/login');\n              } else {\n                data.json().then(result => {\n                  changeAlert('danger', result.error);\n                });\n              }\n            });\n          });\n        } else if (data.status === 403) {\n          forceLogout();\n          setRedirect('/login');\n        } else {\n          data.json().then(result => {\n            changeAlert('danger', result.error);\n          });\n        }\n      });\n    }\n  };\n\n  const answerArea = [];\n\n  for (let i = 0; i < 6; i++) {\n    answerArea.push( /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-control\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Answer\",\n          onChange: e => {\n            setAnswers[i](e.target.value);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"checkbox\",\n          defaultChecked: correct[i],\n          onChange: () => {\n            setCorrect[i](!correct[i]);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Correct answer\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 11\n        }, this)]\n      }, i, true, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 9\n      }, this)\n    }, void 0, false));\n  }\n\n  if (redirect === '') {\n    return /*#__PURE__*/_jsxDEV(\"body\", {\n      className: \"text-center\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"firstsection\",\n          children: \"Create a new question\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-floating\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Question:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Type:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(OptionStyle, {\n            change: updateValue\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 177,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-floating\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"sr-only\",\n            children: \"Questions\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 182,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            className: \"form-control\",\n            placeholder: \"Questions\",\n            onChange: e => {\n              setQuestion(e.target.value);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"sr-only\",\n            children: \"Time limit (seconds)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            className: \"form-control\",\n            placeholder: \"Time limit (seconds)\",\n            onChange: e => {\n              if (e.target.value === '') {\n                setTime(0);\n              } else {\n                setTime(parseInt(e.target.value));\n              }\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"sr-only\",\n            children: \"Points\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            className: \"form-control\",\n            placeholder: \"Points\",\n            onChange: e => {\n              if (e.target.value === '') {\n                setPoint(0);\n              } else {\n                setPoint(parseInt(e.target.value));\n              }\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 215,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"sr-only\",\n            children: \"URL\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            className: \"form-control\",\n            placeholder: \"YouTube ID (optional)\",\n            onChange: e => {\n              setSrc(e.target.value);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 232,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Answers:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 11\n        }, this), answerArea, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-lg btn-primary btn-block btn-sm\",\n          onClick: createQ,\n          children: \"Add\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 243,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 7\n    }, this);\n  } else {\n    return /*#__PURE__*/_jsxDEV(Redirect, {\n      push: true,\n      to: redirect\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 7\n    }, this);\n  }\n}\n\n_s(CreateQuestion, \"II3CogcaaGrMsquduauVPmdUREg=\", false, function () {\n  return [useParams];\n});\n\n_c = CreateQuestion;\nCreateQuestion.propTypes = {\n  changeAlert: propTypes.func,\n  forceLogout: propTypes.func\n};\nexport default CreateQuestion;\n\nvar _c;\n\n$RefreshReg$(_c, \"CreateQuestion\");","map":{"version":3,"sources":["/Users/suphachabharnigrodhananda/Desktop/6080/ass3/frontend/src/elements/createQuestion.jsx"],"names":["React","OptionStyle","useParams","Cookies","propTypes","Redirect","CreateQuestion","changeAlert","forceLogout","cookies","id","redirect","setRedirect","useState","updateType","setUpdateType","numAnswer","setNumAnswer","question","setQuestion","time","setTime","point","setPoint","src","setSrc","answers","setAnswers","i","answer","setAnswer","push","correct","setCorrect","isCorrect","setIsCorrect","useEffect","updateValue","e","target","value","createQ","valid","choicesJSON","answersJSON","choice","length","fetch","method","headers","Accept","Authorization","get","then","data","status","json","result","questions","description","choices","body","JSON","stringify","name","error","answerArea","parseInt","func"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { OptionStyle } from '../components/OptionStyle.styles';\nimport { useParams } from 'react-router';\nimport Cookies from 'universal-cookie';\nimport propTypes from 'prop-types';\nimport {\n  Redirect\n} from 'react-router-dom';\n\nfunction CreateQuestion ({ changeAlert, forceLogout }) {\n  const cookies = new Cookies();\n  const { id } = useParams();\n  const [redirect, setRedirect] = React.useState('');\n  const [updateType, setUpdateType] = React.useState('multiple');\n  const [numAnswer, setNumAnswer] = React.useState('1');\n  const [question, setQuestion] = React.useState('');\n  const [time, setTime] = React.useState(0);\n  const [point, setPoint] = React.useState(0);\n  const [src, setSrc] = React.useState('');\n  const answers = [];\n  const setAnswers = [];\n  for (let i = 0; i < 6; i++) {\n    const [answer, setAnswer] = React.useState('');\n    answers.push(answer);\n    setAnswers.push(setAnswer);\n  }\n  const correct = [];\n  const setCorrect = [];\n  for (let i = 0; i < 6; i++) {\n    const [isCorrect, setIsCorrect] = React.useState(false);\n    correct.push(isCorrect);\n    setCorrect.push(setIsCorrect);\n  }\n\n  React.useEffect(() => {\n    if (updateType === 'single') {\n      setNumAnswer('0');\n    } else {\n      setNumAnswer('1');\n    }\n  }, [updateType]);\n\n  const updateValue = (e) => {\n    setUpdateType(e.target.value);\n  }\n\n  const createQ = () => {\n    let valid = true;\n    const choicesJSON = [];\n    const answersJSON = [];\n    if (question === '') {\n      valid = false;\n      changeAlert('danger', 'You must add a description for the question');\n    } else if (time <= 0 || point <= 0) {\n      valid = false;\n      changeAlert('danger', 'You must add a valid value for time and point (>0)');\n    } else {\n      let id = 1;\n      for (let i = 0; i < 6; i++) {\n        if (answers[i] !== '') {\n          choicesJSON.push({\n            id: id,\n            choice: answers[i]\n          });\n          if (correct[i]) {\n            answersJSON.push(id);\n          }\n          id++;\n        }\n      }\n      if (choicesJSON.length < 2) {\n        valid = false;\n        changeAlert('danger', 'The question must have 2-6 choices');\n      } else if (answersJSON.length < 1) {\n        valid = false;\n        changeAlert('danger', 'The question must have correct answer');\n      } else if (numAnswer === '0' && answersJSON.length > 1) {\n        valid = false;\n        changeAlert('danger', 'The single-choice question can only have 1 correct answer');\n      }\n    }\n\n    if (valid) {\n      fetch('http://localhost:5005/admin/quiz/' + id, {\n        method: 'GET',\n        headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/json',\n          Authorization: 'Bearer ' + cookies.get('token')\n        }\n      }).then(data => {\n        if (data.status === 200) {\n          data.json().then((result) => {\n            result.questions.push({\n              description: question,\n              time: time,\n              point: point,\n              src: src === '' ? null : ('http://www.youtube.com/embed/' + src),\n              choices: choicesJSON,\n              answers: answersJSON\n            });\n            fetch('http://localhost:5005/admin/quiz/' + id, {\n              method: 'PUT',\n              headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json',\n                Authorization: 'Bearer ' + cookies.get('token')\n              },\n              body: JSON.stringify(result)\n            }).then(data => {\n              if (data.status === 200) {\n                changeAlert('success', 'You have add \"' + question + '\" to \"' + result.name + '\"');\n                setRedirect('/edit/' + id);\n              } else if (data.status === 403) {\n                forceLogout();\n                setRedirect('/login');\n              } else {\n                data.json().then((result) => {\n                  changeAlert('danger', result.error);\n                });\n              }\n            });\n          });\n        } else if (data.status === 403) {\n          forceLogout();\n          setRedirect('/login');\n        } else {\n          data.json().then((result) => {\n            changeAlert('danger', result.error);\n          });\n        }\n      });\n    }\n  }\n\n  const answerArea = [];\n  for (let i = 0; i < 6; i++) {\n    answerArea.push(\n      <>\n        <div className='form-control' key={i}>\n          <input\n            type='text'\n            placeholder='Answer'\n            onChange={(e) => { setAnswers[i](e.target.value); } }\n          ></input>\n          <input\n            type='checkbox'\n            defaultChecked={correct[i]}\n            onChange={() => { setCorrect[i](!correct[i]); }}\n          ></input>\n          <label>Correct answer</label>\n        </div>\n      </>\n    );\n  }\n\n  if (redirect === '') {\n    return (\n      <body\n        className=\"text-center\"\n      >\n        <div\n        >\n          <h1\n            className=\"firstsection\"\n          >\n            Create a new question\n          </h1>\n          <br />\n          <div\n            className='form-floating'\n          >\n            <label>\n              Question:\n            </label>\n            <label>Type:</label>\n            <OptionStyle change={updateValue}/>\n          </div>\n          <div\n          className='form-floating'\n          >\n            <label\n              className=\"sr-only\"\n            >\n              Questions\n            </label>\n            <input\n              type='text'\n              className='form-control'\n              placeholder='Questions'\n              onChange={(e) => { setQuestion(e.target.value); }}\n            ></input>\n            <label\n              className=\"sr-only\"\n            >\n              Time limit (seconds)\n            </label>\n            <input\n              type='number'\n              className='form-control'\n              placeholder='Time limit (seconds)'\n              onChange={(e) => {\n                if (e.target.value === '') {\n                  setTime(0);\n                } else {\n                  setTime(parseInt(e.target.value));\n                }\n              }}\n            ></input>\n            <label\n              className=\"sr-only\"\n            >\n              Points\n            </label>\n            <input\n              type='number'\n              className='form-control'\n              placeholder='Points'\n              onChange={(e) => {\n                if (e.target.value === '') {\n                  setPoint(0);\n                } else {\n                  setPoint(parseInt(e.target.value));\n                }\n              }}\n            ></input>\n            <label\n              className=\"sr-only\"\n            >\n              URL\n            </label>\n            <input\n              type='text'\n              className='form-control'\n              placeholder='YouTube ID (optional)'\n              onChange={(e) => { setSrc(e.target.value); }}\n            ></input>\n          </div>\n          <br />\n          <label>Answers:</label>\n          {answerArea}\n          <br />\n          <button\n            className='btn btn-lg btn-primary btn-block btn-sm'\n            onClick={createQ}\n          >\n            Add\n          </button>\n          <br />\n        </div>\n      </body>\n    );\n  } else {\n    return (\n      <Redirect push to={redirect} />\n    );\n  }\n}\n\nCreateQuestion.propTypes = {\n  changeAlert: propTypes.func,\n  forceLogout: propTypes.func\n};\n\nexport default CreateQuestion;\n"]},"metadata":{},"sourceType":"module"}